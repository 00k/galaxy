
package galaxy;

import "task.proto";

option cc_generic_services = true;

message HeartBeatRequest {
    optional int64 seq_id = 1;      // id for communicate
    optional int64 agent_id = 2;
    optional string agent_addr = 3;
    repeated ResourceItem total_resource_list = 4;
    repeated ResourceItem used_resource_list = 5;
    repeated TaskStatus task_status = 6;
}

message HeartBeatResponse {
    optional int64 seq_id = 1;
    optional int32 status = 2;
}

message NewTaskRequest {
    optional string task_name = 2;
    optional bytes task_raw = 3;
    optional string cmd_line = 4;
    optional int32 replic_count = 5;
}

message NewTaskResponse {
    optional int32 status = 2;
}

service Master {
    rpc HeartBeat(HeartBeatRequest) returns(HeartBeatResponse);
    rpc NewTask(NewTaskRequest) returns(NewTaskResponse);
}

